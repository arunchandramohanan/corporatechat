# Multi-Agent System Quick Start

## 🚀 Get Started in 5 Minutes

### Step 1: Install Dependencies

```bash
# Backend
cd backend
pip install -r requirements.txt

# Frontend (if needed)
cd ..
npm install
```

### Step 2: Enable Multi-Agent Mode

Add to `backend/.env`:
```bash
USE_MULTI_AGENT=true
```

### Step 3: Start the Application

```bash
# Terminal 1 - Backend
cd backend
uvicorn main:app --reload --host 0.0.0.0 --port 3009

# Terminal 2 - Frontend
npm run dev
```

### Step 4: Test the Agents

Open http://localhost:3000 and try these queries:

#### Test PolicyAgent 🔷
```
"What are the foreign transaction fees?"
"Tell me about travel insurance benefits"
"What rewards do I earn on dining?"
```

#### Test AccountAgent 🟢
```
"What's my current balance?"
"Show me my credit limit"
"I want to add an authorized user"
```

#### Test TransactionAgent 🟠
```
"Show my recent transactions"
"I need to dispute a charge"
"Download my statement"
```

#### Test AnalyticsAgent 🟣
```
"Show my spending by category"
"Am I over budget this month?"
"Generate an expense report"
```

#### Test Multi-Agent Collaboration 🤝
```
"What's my balance and show spending trends?"
"Check my rewards and recent transactions"
```

#### Test EscalationAgent 🔴
```
"I want to speak to a manager"
"File a complaint about a fee"
"Report unauthorized charges"
```

## ✅ Verify It's Working

### Check Backend Logs

You should see:
```
INFO: Multi-agent orchestrator initialized
INFO: Routed to policy agent (confidence: 0.95)
INFO: [PolicyAgent] searching_policy_documents: Searching for...
```

### Check Frontend UI

Look for:
- ✅ Agent badges on bot messages
- ✅ "How I Helped" expandable section
- ✅ Agent handoff indicators (for multi-agent queries)
- ✅ Colored agent identifiers

### Check API Response

Test the endpoint:
```bash
curl http://localhost:3009/agents/info
```

Should return:
```json
{
  "multi_agent_enabled": true,
  "agents": [...],
  "total_agents": 5
}
```

## 🎯 What to Expect

### Single Agent Response
- One agent handles the query
- Agent badge shows which expert responded
- "How I Helped" shows reasoning steps
- Source citations included

### Multi-Agent Response
- Multiple agents collaborate
- Handoff animation shows transition
- Combined response from all agents
- Each agent's steps visible

### Escalation Response
- Red escalation badge
- Ticket number generated
- Next steps clearly outlined
- SLA and timeline provided

## 🐛 Troubleshooting

### "Multi-agent system not enabled"
- Check `USE_MULTI_AGENT=true` in .env
- Restart backend server
- Check logs for initialization message

### Agents not showing in UI
- Check browser console for errors
- Verify API response includes new fields
- Clear browser cache

### Dependencies not installing
```bash
# Try upgrading pip
pip install --upgrade pip

# Install dependencies individually
pip install langgraph
pip install langchain-anthropic
```

## 📊 Monitor Performance

Watch the backend logs to see:
- Which agent is selected
- Confidence scores
- Tool usage
- Response times

Example log output:
```
INFO: Classified intent as: policy_query
INFO: Routed to policy agent (confidence: 0.95)
INFO: [PolicyAgent] searching_policy_documents: Searching corporate card policy documents for: What are the foreign transaction fees?
INFO: [PolicyAgent] documents_retrieved: Found 3 relevant document sections
INFO: [PolicyAgent] generating_response: Generating policy answer using retrieved documents
INFO: Multi-agent response generated by policy with 1 agents consulted
```

## 🎨 Customize

### Change Agent Colors

Edit `src/components/AgentBadge.jsx`:
```javascript
policy: {
  label: 'Policy Expert',
  color: '#YOUR_COLOR',  // Change this
  icon: PolicyIcon,
  description: 'Your description'
}
```

### Add Custom Follow-ups

Edit agent files in `backend/agents/`:
```python
def get_follow_up_options(self, state: AgentState) -> List[str]:
    return ["Custom option 1", "Custom option 2"]
```

### Modify Intent Classification

Edit `backend/agents/orchestrator.py`:
```python
def _classify_intent(self, state: AgentState) -> AgentState:
    query = state["user_query"].lower()

    # Add your custom logic
    if "custom_keyword" in query:
        state["intent"] = "custom_intent"
```

## 📖 Learn More

- Full documentation: `MULTI_AGENT_GUIDE.md`
- Architecture details: See "Architecture" section
- Adding new agents: See "Development Guide"

## ✨ Key Features Enabled

- ✅ 5 Specialized AI agents
- ✅ Intelligent query routing
- ✅ Multi-agent collaboration
- ✅ Transparent reasoning process
- ✅ Automatic escalation handling
- ✅ Context-aware responses
- ✅ Visual agent indicators
- ✅ Real-time agent handoffs

---

**You're all set!** Start testing the multi-agent system now. 🎉
